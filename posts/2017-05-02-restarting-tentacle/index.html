<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Restarting Tentacle | Learn by doing!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <link rel="stylesheet" href="/css/main.min.cf5a9474c9571b6ee4084a6e4b313644381248ea7518f2a95275e1e135d8505a.css" integrity="sha256-z1qUdMlXG27kCEpuSzE2RDgSSOp1GPKpUnXh4TXYUFo=" crossorigin="anonymous">

    
        <script src="/js/main.bad0469675c3e45cf1a9fecdddf24ae6e0d117e20ca765a05251990c33d458f7.js" integrity="sha256-utBGlnXD5Fzxqf7N3fJK5uDRF&#43;IMp2WgUlGZDDPUWPc=" crossorigin="anonymous" defer></script>

  </head>
  <body>
    <div class="site-shell">
      <header class="site-nav">
        <div class="site-brand">
          <a href="https://blog.uitlanders.com/">Learn by doing!</a>
        </div>
        <nav>
          <ul class="site-menu">
            
              <li>
                <a href="/posts" >
                  posts
                </a>
              </li>
            
              <li>
                <a href="/contact" >
                  contact
                </a>
              </li>
            
          </ul>
        </nav>
        <button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle color theme">
          
          <svg class="theme-icon theme-icon-sun" width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
	          <path fill="currentColor" d="M12 16.5A4.505 4.505 0 0 1 7.5 12c0-2.481 2.019-4.5 4.5-4.5s4.5 2.019 4.5 4.5s-2.019 4.5-4.5 4.5" />
	          <path fill="currentColor" fill-rule="evenodd" d="M12 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 12 3m6 9a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5M3 12a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 3 12m9 6a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2a.5.5 0 0 1 .5-.5m6.354-12.354a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708-.708l1.5-1.5a.5.5 0 0 1 .708 0m-10.5 10.5a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708-.708l1.5-1.5a.5.5 0 0 1 .708 0m-2.208-10.5a.5.5 0 0 1 .708 0l1.5 1.5a.5.5 0 1 1-.708.708l-1.5-1.5a.5.5 0 0 1 0-.708m10.5 10.5a.5.5 0 0 1 .708 0l1.5 1.5a.5.5 0 0 1-.708.708l-1.5-1.5a.5.5 0 0 1 0-.708" clip-rule="evenodd" />
          </svg>
          
          <svg class="theme-icon theme-icon-moon"  width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
             <g fill="none" stroke="currentColor" stroke-width="1">
              <path d="M20.434 13.934a6.5 6.5 0 0 1-7.367-7.367A6.501 6.501 0 0 0 14 19.5a6.5 6.5 0 0 0 6.433-5.566Z"/>
              <path stroke-linecap="round" d="M4.5 8.75v1.5m.75-.75h-1.5m3.75-6v2m1-1h-2"/>
            </g>
          </svg>
        </button>
      </header>

      <main class="site-main">
        
          <section class="glass-card">
            
  <h1>Restarting Tentacle</h1>

  
  
  <time datetime="2017-05-02T00:00:00&#43;00:00">May 2, 2017</time>

  <p>Short post this time.  I was reviewing the newsletter for <a href="https://octopus.com/">Ocotopus Deploy</a> and came across an article on <a href="https://thaddparker.wordpress.com/2017/04/04/how-to-update-octopus-deploy-tentacle-to-restart-automatically/?__s=kv5pr8errbcsurcyn9np">automatically restarting Octopus Tentacle services</a>.</p>
<p>I liked the idea but as part of my <em><strong>automate all the things</strong></em> preference at the moment I thought it should be possible to do this without getting an GUI involved.  Fortunately this is easily possible.  Start a console/cmd session with suitable Administrator rights and type the following:</p>
<pre><code>sc failure &quot;OctopusDeploy Tentacle&quot; reset=0 actions= restart/0/restart/0/restart/0
</code></pre>
<p>This happily set the first / second / subsequent failure actions.<br />
<img src="/assets/201705/0001_scfailure.png" alt="1i"></p>
<pre><code>sc config &quot;OctopusDeploy Tentacle&quot; start= delayed-auto
</code></pre>
<p>To set the startup to &lsquo;Automatic (Delayed Start)&rsquo;<br />
<img src="/assets/201705/0002_scconfig.png" alt="2i"></p>
<p>Hopefully this helps someone and/or makes me internet famous if it hits the <a href="https://octopus.com/">Octopus Deploy</a> newsletter!  I might even check how hard it is to use the Ocotopus <a href="https://octopus.com/docs/administration/script-console">script console</a> to run it.</p>
<p><em><strong>Update</strong></em></p>
<p>Script console worked well.  Just used the following powershell to update a bunch of tentacles.</p>
<pre tabindex="0"><code>#Enable automatic recovery of *Tentacle* services
$TentaclesServices = Get-Service | Where-Object {$_.name -like &#39;*Tentacle*&#39;}
foreach($Tentacle in $TentaclesServices) {
    Write-Host Update serivce options for : $Tentacle.Name
    Write-Host `tDelayed start...
    sc.exe config $Tentacle.Name start= delayed-auto
    Write-Host `tRecovery options...
    sc.exe failure $Tentacle.Name reset=0 actions= restart/0/restart/0/restart/0
    Write-Host &#39;Complete&#39;
}
</code></pre>
  
  <div>
    <div>Tags:</div>
    <ul>
        <li><a href="/tags/octopus/">Octopus</a></li>
    </ul>
  </div>

  
    <nav class="post-nav-fab" aria-label="Post navigation">
      
        <a class="post-nav-btn post-nav-prev" href="/posts/2016-09-05-you-have-chosen/" aria-label="Previous post">&#8592;</a>
      
      
        <a class="post-nav-btn post-nav-next" href="/posts/2017-06-26-normal-programming-resumed/" aria-label="Next post">&#8594;</a>
      
    </nav>
  

          </section>
        
      </main>
    </div>
    
<script defer src="https://static.cloudflareinsights.com/beacon.min.js"
        data-cf-beacon='{"token": "8759f5d0e794401f8fff6e2599ed47e8"}'></script>


  </body>
</html>
